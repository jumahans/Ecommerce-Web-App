{% extends 'layout.html' %}
{% load static %}

{% block content %}
    <!-- Featured Product -->
    <section class="card fade-in" style="margin: 2rem auto; max-width: 1200px;">
        <div style="display: flex; flex-wrap: wrap; gap: 2rem; align-items: center; justify-content: center;">
            <div style="flex: 1 1 320px; min-width: 280px; max-width: 400px; display: flex; align-items: center; justify-content: center;">
                <img src="{% static 'images/products/1.jpg' %}" alt="Featured Product" style="width: 100%; max-width: 350px; height: auto; border-radius: var(--border-radius); box-shadow: var(--box-shadow); object-fit: cover;">
            </div>
            <div style="flex: 2 1 400px; min-width: 280px;">
                <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 1rem;">Fashion Mens Air Cushion Sneaker</h2>
                <p style="font-size: 1.1rem; color: var(--gray-medium);">Males Sport Shoes Color With Ink Splashing Shoes White</p>
            </div>
        </div>
    </section>

    <!-- Category/Product Grid -->
    <section style="margin: 3rem auto 2rem auto; max-width: 1200px;">
        <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--primary-color);">Shop by Category</h2>
        <div style="display: flex; flex-direction: column; gap: 2.5rem;">
            {% for category, products in category_products.items %}
                <div>
                    <h3 style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-dark);">{{ category }}</h3>
                    <ul style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; padding: 0; margin: 0;">
                        {% for product in products %}
                        <li class="card fade-in" style="padding: 0; overflow: hidden; display: flex; flex-direction: column; height: 100%;">
                            <a href="{% url 'product' pk=product.pk %}" style="display: flex; flex-direction: column; height: 100%; color: inherit; text-decoration: none;">
                                <div style="height: 200px; width: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; background: #f8f8f8;">
                                    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 100%; max-height: 180px; object-fit: contain; display: block; margin: 0 auto;">
                                </div>
                                <div style="padding: 1.25rem; flex-grow: 1; display: flex; flex-direction: column;">
                                    <h4 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-dark);">{{ product.name }}</h4>
                                    <p style="font-size: 0.95rem; color: var(--gray-medium); margin-bottom: 0.5rem; flex-grow: 1;">{{ product.description|truncatewords:15 }}</p>
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: auto;">
                                        <span style="font-weight: 700; color: var(--primary-color);">sh {{ product.price }}</span>
                                        <span class="btn btn-secondary pop" style="font-size: 0.95rem; padding: 0.5rem 1.2rem;">View Details</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        {% empty %}
                            <li>No products available in this category.</li>
                        {% endfor %}
                    </ul>
                </div>
            {% empty %}
                <p>No categories found.</p>
            {% endfor %}
        </div>
    </section>
{% endblock %}
